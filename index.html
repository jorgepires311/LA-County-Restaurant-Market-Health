<!doctype html>
<html lang="en">
<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="css/dashboard.css">
	<title>PingTree Reports</title>

	<!-- map CSS -->
	<link rel="stylesheet" type="text/css" href="static/css/style.css">

	<!-- Leaflet JS & CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.3/dist/leaflet.css"
    integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.3/dist/leaflet.js"
    integrity="sha512-tAGcCfR4Sc5ZP5ZoVz0quoZDYX5aCtEm/eu1KhSLj2c9eFrylXZknQYmxUssFaVJKvvc0dJQixhGjG2yXWiV9Q=="
    crossorigin=""></script>

  <!-- d3 JS -->
    <script src="https://d3js.org/d3.v4.min.js"></script>

  <!-- Marker Cluster JS & CSS -->
  <script type="text/javascript" src="https://unpkg.com/leaflet.markercluster@1.0.3/dist/leaflet.markercluster.js"></script>
  <link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet.markercluster@1.0.3/dist/MarkerCluster.css">
  <link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet.markercluster@1.0.3/dist/MarkerCluster.Default.css">
</head>

<body>
	<h1>PingTree Affiliate Reports</h1>

	<input type="file" onchange="loadFile()"/>

	<script>
		var reader = new FileReader();

		function loadFile() {
			var file = document.querySelector( 'input[type=file]' ).files[ 0 ];
			reader.addEventListener( "load", parseFile, false );
			if ( file ) {
				reader.readAsText( file );
			}
		}

		function parseFile() {
			var doesColumnExist = false;
			var data = d3.csv.parse( reader.result, function ( d ) {
				doesColumnExist = d.hasOwnProperty( "Ping ID" );
				return d;
			} );

			//console.log( doesColumnExist );
			console.log( data );
			d3.select( "tbody" )
				.selectAll( "tr" )
				.data( data )
				.enter()
				.append( "tr" )
				.html( function ( d ) {
					return `<td>${d.Affiliate}</td><td>${d.Campaign}</td><td>${d.State}</td>`;
				} );

		}
	</script>
	<nav class="navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow">
		<a class="navbar-brand col-sm-3 col-md-2 mr-0" href="#">Pin Point Legal Marketing</a>
		<input class="form-control form-control-dark w-100" type="file" onchange="loadFile()" placeholder="Upload pingtree log report CSV">
		<ul class="navbar-nav px-3">
			<li class="nav-item text-nowrap">
				<a class="nav-link" href="#">Sign out</a>
			</li>
		</ul>
	</nav>
	<div class="container-fluid">
		<div class="row">
			<nav class="col-md-2 d-none d-md-block bg-light sidebar">
				<div class="sidebar-sticky">
					<ul class="nav flex-column">
						<li class="nav-item">
							<a class="nav-link active" href="#">
              <span data-feather="home"></span>
             Dashboard 
<!--								<span class="sr-only">(current)</span>-->
            </a>
						



						</li>
						<!--
						<li class="nav-item">
							<a class="nav-link" href="#">
              <span data-feather="file"></span>
              Orders
            </a>
						
						</li>
						<li class="nav-item">
							<a class="nav-link" href="#">
              <span data-feather="shopping-cart"></span>
              Products
            </a>
						
						</li>
						<li class="nav-item">
							<a class="nav-link" href="#">
              <span data-feather="users"></span>
              Customers
            </a>
						
						</li>
						<li class="nav-item">
							<a class="nav-link" href="#">
              <span data-feather="bar-chart-2"></span>
              Reports
            </a>
						
						</li>
						<li class="nav-item">
							<a class="nav-link" href="#">
              <span data-feather="layers"></span>
              Integrations
            </a>
						
						</li>
-->
					</ul>

					<h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
          <span>Saved reports (coming soon)</span>
          <a class="d-flex align-items-center text-muted" href="#">
            <span data-feather="plus-circle"></span>
          </a>
        </h6>
				



					<!--
					<ul class="nav flex-column mb-2">
						<li class="nav-item">
							<a class="nav-link" href="#">
              <span data-feather="file-text"></span>
              Current month
            </a>
						
						</li>
						<li class="nav-item">
							<a class="nav-link" href="#">
              <span data-feather="file-text"></span>
              Last quarter
            </a>
						
						</li>
						<li class="nav-item">
							<a class="nav-link" href="#">
              <span data-feather="file-text"></span>
              Social engagement
            </a>
						
						</li>
						<li class="nav-item">
							<a class="nav-link" href="#">
              <span data-feather="file-text"></span>
              Year-end sale
            </a>
						
						</li>
					</ul>
-->
				</div>
			</nav>

			<main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
				<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
					<h1 class="h2">Dashboard</h1>
					<div class="btn-toolbar mb-2 mb-md-0">
						<div class="btn-group mr-2">
							<button type="button" class="btn btn-sm btn-outline-secondary">Share</button>
							<button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
						</div>
						<button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle">
            <span data-feather="calendar"></span>
            This week
          </button>
					

 

					</div>
				</div>

<!--				<canvas class="my-4 w-100" id="myChart" width="900" height="380"></canvas>-->

				<h2>Section title</h2>
				<div class="table-responsive">
					<table class="table table-striped table-sm">
						<thead>

						</thead>
						<tbody>

						</tbody>
					</table>
				</div>
			</main>
		<div id="map"></div>
    <script type="text/javascript" src="static/js/config.js"></script>
    <script type="text/javascript" src="static/js/locations_clusters.js"></script>
		</div>
	</div>
	<!-- Optional JavaScript -->
	<!-- jQuery first, then Popper.js, then Bootstrap JS -->

	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.9.0/feather.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
	<script data-require="d3@3.5.3" data-semver="3.5.3" src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.js"></script>
</body>
</html>